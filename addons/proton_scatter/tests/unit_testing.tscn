[gd_scene load_steps=33 format=3 uid="uid://chgskywnqfgv"]

[ext_resource type="Script" path="res://addons/proton_scatter/src/scatter.gd" id="1_hld6g"]
[ext_resource type="Script" path="res://addons/proton_scatter/src/stack/modifier_stack.gd" id="2_y5xi5"]
[ext_resource type="Script" path="res://addons/proton_scatter/src/modifiers/create_inside_random.gd" id="3_6h2s3"]
[ext_resource type="Script" path="res://addons/proton_scatter/src/scatter_item.gd" id="4_w0gix"]
[ext_resource type="Script" path="res://addons/proton_scatter/src/scatter_shape.gd" id="5_y7d7p"]
[ext_resource type="Script" path="res://addons/proton_scatter/src/shapes/sphere_shape.gd" id="6_ma1h0"]
[ext_resource type="Script" path="res://addons/proton_scatter/src/modifiers/create_inside_grid.gd" id="7_h0gb3"]
[ext_resource type="Script" path="res://addons/proton_scatter/src/modifiers/create_inside_poisson.gd" id="8_w8gx7"]
[ext_resource type="Script" path="res://addons/proton_scatter/src/modifiers/create_along_edge_random.gd" id="9_cbx3g"]

[sub_resource type="BoxMesh" id="BoxMesh_8ubhl"]
size = Vector3(50, 1, 50)

[sub_resource type="BoxShape3D" id="BoxShape3D_bii4q"]
size = Vector3(50, 1, 50)

[sub_resource type="Resource" id="Resource_8lead"]
script = ExtResource("3_6h2s3")
amount = 15
enabled = true
override_global_seed = false
custom_seed = 0
restrict_height = false
reference_frame = 0

[sub_resource type="Resource" id="Resource_q1tq4"]
script = ExtResource("2_y5xi5")
stack = Array[Resource]([SubResource("Resource_8lead")])

[sub_resource type="Resource" id="Resource_g8bsm"]
script = ExtResource("6_ma1h0")
radius = 1.08202

[sub_resource type="Resource" id="Resource_svnck"]
script = ExtResource("3_6h2s3")
amount = 15
enabled = true
override_global_seed = false
custom_seed = 0
restrict_height = true
reference_frame = 1

[sub_resource type="Resource" id="Resource_pksk6"]
script = ExtResource("2_y5xi5")
stack = Array[Resource]([SubResource("Resource_svnck")])

[sub_resource type="Resource" id="Resource_nwd3r"]
script = ExtResource("6_ma1h0")
radius = 1.08202

[sub_resource type="Resource" id="Resource_uv5fa"]
script = ExtResource("7_h0gb3")
spacing = Vector3(0.5, 0.5, 0.5)
enabled = true
override_global_seed = false
custom_seed = 0
restrict_height = false
reference_frame = 0

[sub_resource type="Resource" id="Resource_xjm5g"]
script = ExtResource("2_y5xi5")
stack = Array[Resource]([SubResource("Resource_uv5fa")])

[sub_resource type="Resource" id="Resource_y8aw6"]
script = ExtResource("6_ma1h0")
radius = 1.11573

[sub_resource type="Resource" id="Resource_wvlnw"]
script = ExtResource("7_h0gb3")
spacing = Vector3(0.5, 0.5, 0.5)
enabled = true
override_global_seed = false
custom_seed = 0
restrict_height = true
reference_frame = 1

[sub_resource type="Resource" id="Resource_40m4i"]
script = ExtResource("2_y5xi5")
stack = Array[Resource]([SubResource("Resource_wvlnw")])

[sub_resource type="Resource" id="Resource_fr8ni"]
script = ExtResource("6_ma1h0")
radius = 1.11573

[sub_resource type="Resource" id="Resource_31jy1"]
script = ExtResource("8_w8gx7")
radius = 0.5
samples_before_rejection = 15
enabled = true
override_global_seed = false
custom_seed = 0
restrict_height = false
reference_frame = 0

[sub_resource type="Resource" id="Resource_n8lei"]
script = ExtResource("2_y5xi5")
stack = Array[Resource]([SubResource("Resource_31jy1")])

[sub_resource type="Resource" id="Resource_ve5u2"]
script = ExtResource("6_ma1h0")
radius = 1.3139

[sub_resource type="Resource" id="Resource_1vgf7"]
script = ExtResource("8_w8gx7")
radius = 0.5
samples_before_rejection = 15
enabled = true
override_global_seed = false
custom_seed = 0
restrict_height = true
reference_frame = 1

[sub_resource type="Resource" id="Resource_vtv35"]
script = ExtResource("2_y5xi5")
stack = Array[Resource]([SubResource("Resource_1vgf7")])

[sub_resource type="Resource" id="Resource_gywyd"]
script = ExtResource("6_ma1h0")
radius = 1.3139

[sub_resource type="Resource" id="Resource_k3nai"]
script = ExtResource("9_cbx3g")
instance_count = 10
align_to_path = true
align_up_axis = Vector3(0, 1, 0)
enabled = true
override_global_seed = false
custom_seed = 0
restrict_height = false
reference_frame = 1

[sub_resource type="Resource" id="Resource_2gp85"]
script = ExtResource("2_y5xi5")
stack = Array[Resource]([SubResource("Resource_k3nai")])

[sub_resource type="Resource" id="Resource_m77vl"]
script = ExtResource("6_ma1h0")
radius = 1.22199

[node name="UnitTesting" type="Node3D"]
editor_description = "This scene checks for regressions.

Every modifier are used in different Scatter nodes in different configuration. The generated transforms are then compared to the expected results, and throw an error if they don't match."

[node name="Label3D" type="Label3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 4.64562, -24.3968)
pixel_size = 0.1
modulate = Color(0, 0, 0, 1)
outline_modulate = Color(1, 1, 1, 1)
text = "Unit testing scene"
font_size = 46
outline_size = 6
uppercase = true

[node name="Floor" type="StaticBody3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -1, 0)

[node name="MeshInstance3D" type="MeshInstance3D" parent="Floor"]
mesh = SubResource("BoxMesh_8ubhl")
skeleton = NodePath("../..")

[node name="CollisionShape3D" type="CollisionShape3D" parent="Floor"]
shape = SubResource("BoxShape3D_bii4q")

[node name="CreateInside" type="Marker3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -20, 0, -20)

[node name="Random" type="Marker3D" parent="CreateInside"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -3, 0, 0)

[node name="RandomFullHeight" type="Node3D" parent="CreateInside/Random"]
transform = Transform3D(0.933968, 0.297336, -0.198231, -0.357358, 0.7771, -0.518085, 0, 0.554714, 0.832041, 0, 1, -3)
script = ExtResource("1_hld6g")
modifier_stack = SubResource("Resource_q1tq4")

[node name="ScatterItem" type="Node3D" parent="CreateInside/Random/RandomFullHeight"]
script = ExtResource("4_w0gix")
path = "res://addons/proton_scatter/demos/assets/brick.tscn"

[node name="ScatterShape" type="Node3D" parent="CreateInside/Random/RandomFullHeight"]
transform = Transform3D(1, 0, -2.98023e-08, 0, 1, 0, 2.98023e-08, 0, 1, 0, 0, 0)
script = ExtResource("5_y7d7p")
shape = SubResource("Resource_g8bsm")

[node name="RandomFlat" type="Node3D" parent="CreateInside/Random"]
transform = Transform3D(0.963584, 0.267407, 0, -0.267407, 0.963584, 0, 0, 0, 1, 0, 0, 0)
script = ExtResource("1_hld6g")
modifier_stack = SubResource("Resource_pksk6")

[node name="ScatterItem" type="Node3D" parent="CreateInside/Random/RandomFlat"]
script = ExtResource("4_w0gix")
path = "res://addons/proton_scatter/demos/assets/brick.tscn"

[node name="ScatterShape" type="Node3D" parent="CreateInside/Random/RandomFlat"]
transform = Transform3D(1, 0, -2.98023e-08, 0, 1, 0, 2.98023e-08, 0, 1, 0, 0, 0)
script = ExtResource("5_y7d7p")
shape = SubResource("Resource_nwd3r")

[node name="Grid" type="Marker3D" parent="CreateInside"]

[node name="GridFullHeight" type="Node3D" parent="CreateInside/Grid"]
transform = Transform3D(0.840179, 0.54231, 0, -0.54231, 0.840179, 0, 0, 0, 1, -0.169834, 1.0354, -3)
script = ExtResource("1_hld6g")
modifier_stack = SubResource("Resource_xjm5g")

[node name="ScatterItem" type="Node3D" parent="CreateInside/Grid/GridFullHeight"]
script = ExtResource("4_w0gix")
path = "res://addons/proton_scatter/demos/assets/brick.tscn"

[node name="ScatterShape" type="Node3D" parent="CreateInside/Grid/GridFullHeight"]
transform = Transform3D(1, 0, -2.98023e-08, 0, 1, 0, 2.98023e-08, 0, 1, 0, 0, 0)
script = ExtResource("5_y7d7p")
shape = SubResource("Resource_y8aw6")

[node name="GridFlat" type="Node3D" parent="CreateInside/Grid"]
transform = Transform3D(0.660834, 0.16392, -0.732412, -0.240753, 0.970586, 7.45058e-09, 0.710869, 0.176331, 0.680861, -0.0824013, -0.118199, -0.518734)
script = ExtResource("1_hld6g")
modifier_stack = SubResource("Resource_40m4i")

[node name="ScatterItem" type="Node3D" parent="CreateInside/Grid/GridFlat"]
script = ExtResource("4_w0gix")
path = "res://addons/proton_scatter/demos/assets/brick.tscn"

[node name="ScatterShape" type="Node3D" parent="CreateInside/Grid/GridFlat"]
transform = Transform3D(1, 0, -2.98023e-08, 0, 1, 0, 2.98023e-08, 0, 1, 0, 0, 0)
script = ExtResource("5_y7d7p")
shape = SubResource("Resource_fr8ni")

[node name="Poisson" type="Marker3D" parent="CreateInside"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 3, 0, 0)

[node name="PoissonFullHeight" type="Node3D" parent="CreateInside/Poisson"]
transform = Transform3D(0.886341, 0.433591, 0.162475, -0.463033, 0.829983, 0.311012, 0, -0.350894, 0.936415, 0, 1, -3)
script = ExtResource("1_hld6g")
modifier_stack = SubResource("Resource_n8lei")

[node name="ScatterItem" type="Node3D" parent="CreateInside/Poisson/PoissonFullHeight"]
script = ExtResource("4_w0gix")
path = "res://addons/proton_scatter/demos/assets/brick.tscn"

[node name="ScatterShape" type="Node3D" parent="CreateInside/Poisson/PoissonFullHeight"]
script = ExtResource("5_y7d7p")
shape = SubResource("Resource_ve5u2")

[node name="PoissonFlat" type="Node3D" parent="CreateInside/Poisson"]
transform = Transform3D(0.763511, 0.223726, -0.605803, -0.17526, 0.974652, 0.139059, 0.621558, 0, 0.783368, 0, 0, 0)
script = ExtResource("1_hld6g")
modifier_stack = SubResource("Resource_vtv35")

[node name="ScatterItem" type="Node3D" parent="CreateInside/Poisson/PoissonFlat"]
script = ExtResource("4_w0gix")
path = "res://addons/proton_scatter/demos/assets/brick.tscn"

[node name="ScatterShape" type="Node3D" parent="CreateInside/Poisson/PoissonFlat"]
script = ExtResource("5_y7d7p")
shape = SubResource("Resource_gywyd")

[node name="CreateAlongEdge" type="Marker3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -10, 0, -20)

[node name="Random" type="Marker3D" parent="CreateAlongEdge"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -3, 0, 0)

[node name="ProtonScatter" type="Node3D" parent="CreateAlongEdge/Random"]
transform = Transform3D(0.843363, 0.537344, 0, -0.537344, 0.843363, 0, 0, 0, 1, 0, 0, 0)
script = ExtResource("1_hld6g")
modifier_stack = SubResource("Resource_2gp85")

[node name="ScatterItem" type="Node3D" parent="CreateAlongEdge/Random/ProtonScatter"]
script = ExtResource("4_w0gix")
path = "res://addons/proton_scatter/demos/assets/brick.tscn"

[node name="ScatterShape" type="Node3D" parent="CreateAlongEdge/Random/ProtonScatter"]
transform = Transform3D(1, 0, -2.98023e-08, 0, 1, 0, 2.98023e-08, 0, 1, 0, 0, 0)
script = ExtResource("5_y7d7p")
shape = SubResource("Resource_m77vl")

[node name="Continuous" type="Marker3D" parent="CreateAlongEdge"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 3, 0, 0)

[node name="Even" type="Marker3D" parent="CreateAlongEdge"]

[node name="Array" type="Marker3D" parent="."]

[node name="SingleItem" type="Marker3D" parent="."]

[node name="Clusterize" type="Marker3D" parent="."]

[node name="LookAt" type="Marker3D" parent="."]

[node name="Offset" type="Marker3D" parent="."]

[node name="Position" type="Marker3D" parent="Offset"]

[node name="Rotation" type="Marker3D" parent="Offset"]

[node name="Scale" type="Marker3D" parent="Offset"]

[node name="Transform" type="Marker3D" parent="Offset"]

[node name="ProjectOnCollider" type="Marker3D" parent="."]

[node name="Proxy" type="Marker3D" parent="."]

[node name="RandomizeTransforms" type="Marker3D" parent="."]

[node name="Snap" type="Marker3D" parent="."]

[node name="Relax" type="Marker3D" parent="."]

[node name="RemoveOutside" type="Marker3D" parent="."]
